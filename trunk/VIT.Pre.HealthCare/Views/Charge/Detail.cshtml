@model VIT.Pre.HealthCare.Models.ChargeDetailModel

@{
    ViewBag.Title = "Chăm sóc sức khỏe";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset class="patientinfo">
        <legend>Thông tin điều trị</legend>
        
        <table>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.Id):
                    @Html.HiddenFor(model => model.Id)
                </td>
                <td class="value">
                    <div class="id">@Html.DisplayFor(model => model.Id, new { @Value = Model.Id })</div>
                </td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.PatientId):
                    @Html.HiddenFor(model => model.PatientId)
                </td>
                <td class="value">
                    <div class="id">@Html.DisplayFor(model => model.PatientId)</div>
                </td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.PatientName):
                </td>
                <td class="value">
                    <div class="id">@Html.DisplayFor(model => model.PatientName)</div>
                </td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.DateOnset):
                    @Html.ValidationMessageFor(model => model.DateOnset)
                </td>
                <td class="value">
                    @Html.EditorFor(model => model.DateOnset)
                </td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.DateService):
                    @Html.ValidationMessageFor(model => model.DateService)
                </td>
                <td class="value">
                    @Html.EditorFor(model => model.DateService)
                </td>
            </tr>
        </table>
   
        <table>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.Diagnostic):
                    @Html.ValidationMessageFor(model => model.Diagnostic)
                </td>
                <td class="value"><div class="ui-widget">@Html.EditorFor(model => model.Diagnostic)</div></td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.ICDCode1):
                    @Html.ValidationMessageFor(model => model.ICDCode1)
                </td>
                <td class="value">@Html.EditorFor(model => model.ICDCode1)</td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.ICDCode2):
                    @Html.ValidationMessageFor(model => model.ICDCode2)
                </td>
                <td class="value">@Html.EditorFor(model => model.ICDCode2)</td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.ICDCode3):
                    @Html.ValidationMessageFor(model => model.ICDCode3)
                </td>
                <td class="value">@Html.EditorFor(model => model.ICDCode3)</td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.ICDCode4):
                    @Html.ValidationMessageFor(model => model.ICDCode4)
                </td>
                <td class="value">@Html.EditorFor(model => model.ICDCode4)</td>
            </tr>
        </table>
        
        <table>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.CPTCode):
                    @Html.ValidationMessageFor(model => model.CPTCode)
                </td>
                <td class="value">@Html.EditorFor(model => model.CPTCode)</td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.Days):
                    @Html.ValidationMessageFor(model => model.Days)
                </td>
                <td class="value">@Html.EditorFor(model => model.Days)</td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.DoctorId):
                    @Html.ValidationMessageFor(model => model.DoctorId)
                </td>
                <td class="value">@Html.DropDownListFor(model => model.DoctorId, new SelectList(Model.ListDoctors, "Id", "LastName", Model.ListDoctors.First().Id))</td>
            </tr>
            <tr>
                <td class="title">
                    @Html.LabelFor(model => model.Note):
                    @Html.ValidationMessageFor(model => model.Note)
                </td>
                <td class="value chargenote">@Html.TextAreaFor(model => model.Note)</td>
            </tr>
        </table>
        
        <input type="button" value="Lưu" class="btnLogin save"/>
        <input type="button" value="In" class="btnLogin save" onclick="window.open('/Charge/PrintCharge?chargeId=@Model.Id', '_blank', 'width=430, height=600');"/>
    </fieldset>

<fieldset class="druglist">
    <legend>Thông tin thuốc</legend>
    <table class="table" width="100%" border="0" cellspacing="0" cellpadding="0">
        <thead>
            <tr>
                <td>Mã thốc</td>
                <td>Tên thuốc</td>
                <td>Số lượng</td>
                <td>Ghi chú</td>
                <td style="width: 25px"></td>
            </tr>
        </thead>
        
        @foreach (var o in Model.ListChargeDrugs)
        {
            <tr>
                <td>@o.DrugId</td>
                <td>@o.DrugName</td>
                <td>@o.Quality</td>
                <td>@o.Note</td>
                <td style="text-align: center"><a href=""><img src="../../Content/images/DeleteRed.png"/></a></td>
            </tr>
        }

        <tr class="input">
                <td colspan="2">@Html.EditorFor(model => model.DrugId)</td>
                <td>@Html.EditorFor(model => model.Quality)</td>
                <td>@Html.EditorFor(model => model.DrugNote)</td>
                <td style="text-align: center"><input type="button" value="Thêm" class="btnLogin save"/></td>
            </tr>
    </table>
 </fieldset>
}
  <script type="text/javascript" language="javascript">
      $(document).ready(function () {
          $("#DateService").attr('type', 'date');
          $("#DateOnset").attr('type', 'date');
      });
</script>